<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>SUV HUD Offroad</title>
<link rel="stylesheet" href="styles.css">
</head>

<body>

<div id="hud">

  <!-- RPM -->
  <div id="rpmCircle">
    <canvas id="rpmCanvas" width="150" height="150"></canvas>
  </div>

  <!-- SPEED -->
  <div id="speedBox">
    <div id="gear">N</div>

    <div id="speedWrap">
      <div id="speed">0</div>
      <div id="unit">MPH</div>
    </div>

    <div id="bars">
      <div class="barRow">
        <span class="barIcon">â›½</span>
        <div class="bar">
          <div id="fuelBar" class="fillFuel"></div>
        </div>
      </div>

      <div class="barRow">
        <span class="barIcon">ðŸ”§</span>
        <div class="bar">
          <div id="engineBar" class="fillEngine"></div>
        </div>
      </div>
    </div>
  </div>

</div>

<script src="script.js"></script>

<script>
/* ================= RPM (BMW LOGIC â€” UNCHANGED) ================= */
const ctx = rpmCanvas.getContext("2d");
let rpmSmooth = 0;

function drawRPM(r) {
  rpmSmooth += (r - rpmSmooth) * 0.12;
  ctx.clearRect(0, 0, 150, 150);

  const cx = 75, cy = 75, rad = 60;

  /* INDUSTRIAL OUTER RING */
  ctx.strokeStyle = "#2b0a0a";
  ctx.lineWidth = 14;
  ctx.beginPath();
  ctx.arc(cx, cy, rad, 0, Math.PI * 2);
  ctx.stroke();

  /* INNER RING */
  ctx.strokeStyle = "#120000";
  ctx.lineWidth = 4;
  ctx.beginPath();
  ctx.arc(cx, cy, rad - 12, 0, Math.PI * 2);
  ctx.stroke();

  /* TICKS + NUMBERS */
  for (let i = 1; i <= 8; i++) {
    const ang = (-130 + i * 32.5) * Math.PI / 180;

    ctx.strokeStyle = i >= 7 ? "#ff2a2a" : "#ffb3b3";
    ctx.lineWidth = i % 2 === 0 ? 3 : 2;

    ctx.beginPath();
    ctx.moveTo(
      cx + Math.cos(ang) * (rad - 16),
      cy + Math.sin(ang) * (rad - 16)
    );
    ctx.lineTo(
      cx + Math.cos(ang) * (rad - 2),
      cy + Math.sin(ang) * (rad - 2)
    );
    ctx.stroke();

    ctx.fillStyle = i >= 7 ? "#ff4444" : "#ffe0e0";
    ctx.font = "bold 11px Arial";
    ctx.textAlign = "center";
    ctx.textBaseline = "middle";
    ctx.fillText(
      i,
      cx + Math.cos(ang) * (rad - 30),
      cy + Math.sin(ang) * (rad - 30)
    );
  }

  /* NEEDLE */
  const needle = (-130 + rpmSmooth * 260) * Math.PI / 180;
  ctx.strokeStyle = "#ff1e1e";
  ctx.lineWidth = 4;
  ctx.beginPath();
  ctx.moveTo(cx, cy);
  ctx.lineTo(
    cx + Math.cos(needle) * (rad - 22),
    cy + Math.sin(needle) * (rad - 22)
  );
  ctx.stroke();

  /* CENTER BOLT */
  ctx.fillStyle = "#2a0000";
  ctx.beginPath();
  ctx.arc(cx, cy, 5, 0, Math.PI * 2);
  ctx.fill();
}

/* ================= BMW HOOKS (COPY EXACT) ================= */
let speedMPH = 0;
let gearRaw = 0;

window.setRPM = v => drawRPM(v);

window.setSpeed = s => {
  speedMPH = Math.round(s * 2.23694);
  speed.innerText = speedMPH;
  updateGear();
};

window.setGear = g => {
  gearRaw = g;
  updateGear();
};

window.setFuel = f => {
  fuelBar.style.width = (f * 100) + "%";
};

window.setHealth = h => {
  engineBar.style.width = (h * 100) + "%";
};

function updateGear() {
  if (speedMPH === 0) {
    gear.innerText = "N";
  } else if (gearRaw === 0) {
    gear.innerText = "R";
  } else {
    gear.innerText = gearRaw;
  }
}

setSpeedMode(1);
</script>

</body>
</html>
