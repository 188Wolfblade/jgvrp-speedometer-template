<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>SUV HUD Stable A</title>
<link rel="stylesheet" href="styles.css">
</head>

<body>

<div id="hud">

  <!-- RPM -->
  <div id="rpmCircle">
    <canvas id="rpmCanvas" width="140" height="140"></canvas>
  </div>

  <!-- SPEED BOX -->
  <div id="speedBox">
    <div id="gear">N</div>
    <div id="speed">0</div>
    <div id="unit">MPH</div>

    <div id="bars">
      <div class="barRow">
        <span class="icon">â›½</span>
        <div class="bar">
          <div id="fuelBar" class="fill fuel"></div>
        </div>
      </div>

      <div class="barRow">
        <span class="icon">ðŸ”§</span>
        <div class="bar">
          <div id="engineBar" class="fill engine"></div>
        </div>
      </div>
    </div>

    <!-- WELCOME TEXT -->
    <div id="welcome">Happy Driving, Chief Darek</div>
  </div>

</div>

<script src="script.js"></script>

<script>
/* ================= RPM ================= */
const ctx = rpmCanvas.getContext("2d");
let rpmSmooth = 0;

function drawRPM(v) {
  rpmSmooth += (v - rpmSmooth) * 0.12;
  ctx.clearRect(0,0,140,140);

  const cx=70, cy=70, r=58;

  // ring
  ctx.strokeStyle="#5a0000";
  ctx.lineWidth=5;
  ctx.beginPath();
  ctx.arc(cx,cy,r,0,Math.PI*2);
  ctx.stroke();

  // scale + numbers
  for(let i=0;i<=8;i++){
    const a=(-130+i*32.5)*Math.PI/180;
    ctx.strokeStyle=i>=7?"#ff4444":"#ff9999";
    ctx.lineWidth=2;
    ctx.beginPath();
    ctx.moveTo(cx+Math.cos(a)*(r-6),cy+Math.sin(a)*(r-6));
    ctx.lineTo(cx+Math.cos(a)*r,cy+Math.sin(a)*r);
    ctx.stroke();

    if(i>0){
      ctx.fillStyle="#ffdcdc";
      ctx.font="10px Arial";
      ctx.textAlign="center";
      ctx.textBaseline="middle";
      ctx.fillText(
        i,
        cx+Math.cos(a)*(r-16),
        cy+Math.sin(a)*(r-16)
      );
    }
  }

  // needle
  const n=(-130+rpmSmooth*260)*Math.PI/180;
  ctx.strokeStyle="#ff2a2a";
  ctx.lineWidth=3;
  ctx.beginPath();
  ctx.moveTo(cx,cy);
  ctx.lineTo(cx+Math.cos(n)*(r-12),cy+Math.sin(n)*(r-12));
  ctx.stroke();
}

/* ================= HOOKS (UNCHANGED) ================= */
let speedMPH=0;
let gearRaw=0;
let welcomeShown=false;

window.setRPM=v=>drawRPM(v);

window.setSpeed=s=>{
  speedMPH=Math.round(s*2.23694);
  speed.innerText=speedMPH;
  updateGear();

  if(speedMPH>0 && !welcomeShown){
    welcomeShown=true;
    welcome.classList.add("show");
    setTimeout(()=>welcome.classList.remove("show"),10000);
  }
};

window.setGear=g=>{
  gearRaw=g;
  updateGear();
};

window.setFuel=f=>fuelBar.style.width=(f*100)+"%";
window.setHealth=h=>engineBar.style.width=(h*100)+"%";

function updateGear(){
  if(speedMPH===0) gear.innerText="N";
  else if(gearRaw===0) gear.innerText="R";
  else gear.innerText=gearRaw;
}

setSpeedMode(1);
</script>

</body>
</html>
