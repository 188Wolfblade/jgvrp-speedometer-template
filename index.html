<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>SUV HUD Red</title>
<link rel="stylesheet" href="styles.css">
</head>

<body>

<div id="hud">

  <!-- RPM -->
  <div id="rpmCircle">
    <canvas id="rpmCanvas" width="150" height="150"></canvas>
  </div>

  <!-- SPEED -->
  <div id="speedBox">
    <div id="gear">N</div>

    <div id="speedWrap">
      <div id="speed">0</div>
      <div id="unit">MPH</div>
    </div>

    <div id="bars">
      <div class="barRow">
        <span class="barIcon">â›½</span>
        <div class="bar">
          <div id="fuelBar" class="fillFuel"></div>
        </div>
      </div>

      <div class="barRow">
        <span class="barIcon">ðŸ”§</span>
        <div class="bar">
          <div id="engineBar" class="fillEngine"></div>
        </div>
      </div>
    </div>
  </div>

</div>

<script src="script.js"></script>

<script>
/* ===== BMW RPM LOGIC (UNCHANGED) ===== */
const ctx = rpmCanvas.getContext("2d");
let rpmSmooth = 0;

function drawRPM(r) {
  rpmSmooth += (r - rpmSmooth) * 0.12;
  ctx.clearRect(0, 0, 150, 150);

  const cx = 75, cy = 75, rad = 62;

  /* outer circle */
  ctx.strokeStyle = "#5a0f0f";
  ctx.lineWidth = 8;
  ctx.beginPath();
  ctx.arc(cx, cy, rad, 0, Math.PI * 2);
  ctx.stroke();

  /* ticks + numbers */
  for (let i = 1; i <= 8; i++) {
    const ang = (-130 + i * 32.5) * Math.PI / 180;

    ctx.strokeStyle = i >= 7 ? "#ff3333" : "#ffaaaa";
    ctx.lineWidth = 2;

    ctx.beginPath();
    ctx.moveTo(
      cx + Math.cos(ang) * (rad - 8),
      cy + Math.sin(ang) * (rad - 8)
    );
    ctx.lineTo(
      cx + Math.cos(ang) * rad,
      cy + Math.sin(ang) * rad
    );
    ctx.stroke();

    ctx.fillStyle = i >= 7 ? "#ff4444" : "#ffd6d6";
    ctx.font = "11px Arial";
    ctx.textAlign = "center";
    ctx.textBaseline = "middle";
    ctx.fillText(
      i,
      cx + Math.cos(ang) * (rad - 20),
      cy + Math.sin(ang) * (rad - 20)
    );
  }

  /* needle */
  const needle = (-130 + rpmSmooth * 260) * Math.PI / 180;
  ctx.strokeStyle = "#ff2222";
  ctx.lineWidth = 3;
  ctx.beginPath();
  ctx.moveTo(cx, cy);
  ctx.lineTo(
    cx + Math.cos(needle) * (rad - 16),
    cy + Math.sin(needle) * (rad - 16)
  );
  ctx.stroke();
}

/* ===== BMW HOOKS (COPY EXACT) ===== */
let speedMPH = 0;
let gearRaw = 0;

window.setRPM = v => drawRPM(v);

window.setSpeed = s => {
  speedMPH = Math.round(s * 2.23694);
  speed.innerText = speedMPH;
  updateGear();
};

window.setGear = g => {
  gearRaw = g;
  updateGear();
};

window.setFuel = f => {
  fuelBar.style.width = (f * 100) + "%";
};

window.setHealth = h => {
  engineBar.style.width = (h * 100) + "%";
};

function updateGear() {
  if (speedMPH === 0) {
    gear.innerText = "N";
  } else if (gearRaw === 0) {
    gear.innerText = "R";
  } else {
    gear.innerText = gearRaw;
  }
}

setSpeedMode(1); // MPH
</script>

</body>
</html>
